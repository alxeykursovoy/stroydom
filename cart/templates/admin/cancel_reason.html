{% extends "admin/base_site.html" %}
{% load i18n %}

{% block content %}
<div class="container-fluid">
    <h1> Отмена заказов</h1>
    
    <div class="card">
        <div class="card-body">
            <p>Вы собираетесь отменить следующие заказы:</p>
            
            <ul class="list-group mb-4">
                {% for order in orders %}
                <li class="list-group-item">
                    <strong>Заказ #{{ order.id }}</strong> - 
                    {{ order.user.first_name }} {{ order.user.last_name }} - 
                    {{ order.total_price }} ₽
                </li>
                {% endfor %}
            </ul>

            <form method="post">
                {% csrf_token %}
                {% for order in orders %}
                <input type="hidden" name="_selected_action" value="{{ order.pk }}">
                {% endfor %}
                <input type="hidden" name="action" value="{{ action }}">
                
                <div class="mb-3">
                    <label for="reason" class="form-label fw-bold">Причина отказа:</label>
                    <textarea name="reason" id="reason" class="form-control" rows="4" 
                              placeholder="Укажите причину отказа заказчику..." required></textarea>
                    <div class="form-text">Эта причина будет показана пользователю в личном кабинете.</div>
                </div>

                <div class="d-flex gap-2">
                    <button type="submit" name="apply" class="btn btn-danger">
                         Подтвердить отмену
                    </button>
                    <a href="." class="btn btn-secondary"> Отмена</a>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
.card {
    border-radius: 15px;
}
.list-group-item {
    border: none;
    border-bottom: 1px solid #eee;
}
.btn {
    border-radius: 10px;
}
</style>
{% endblock %}